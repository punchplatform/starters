version: '6.0'
runtime: storm
type: punchline
platform: test
meta:
  vendor: sample
dag:

- type: kafka_input
  settings:
    bootstrap.servers: k8saas-test-transversal-eventhub-eastus.servicebus.windows.net:9093
    topic: k8saas-test-transversal-eventhub-eastus-security
    # Possible values are "earliest", "latest" or "last_committed".
    start_offset_strategy: last_committed
    kafka_properties:
      security.protocol: "SASL_SSL"
      sasl.mechanism: "PLAIN"
      sasl.jaas.config: "org.apache.kafka.common.security.plain.PlainLoginModule required username=\"$ConnectionString\" password=\"Endpoint=sb://k8saas-test-transversal-eventhub-eastus.servicebus.windows.net/;SharedAccessKeyName=punch1-sandbox;SharedAccessKey=erpp10LWuiVheNFu4f1fK0AtJkqBfR9XfWeEXIxOlzo=;EntityPath=k8saas-test-transversal-eventhub-eastus-security\";"
  publish:
    - stream: logs
      fields:
      - log

# Punchlet node
- type: punchlet_node
  settings:
    punchlet: 
      - /resources/example.punch
  subscribe:
  - component: kafka_input 
    stream: logs